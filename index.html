<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Find the Missing Number in the Sequence</title>
<style>
  :root{
    --bg:#0b1020;
    --panel:#111936;
    --ink:#e8ecff;
    --muted:#9fb0ff;
    --accent:#6ea8ff;
    --good:#34d399;
    --bad:#f87171;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--bg); color:var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  }
  .wrap{max-width:1100px; margin:0 auto; padding:28px 16px;}
  h1{font-size:2.2rem; margin:0 0 8px;}
  .row{display:flex; flex-wrap:wrap; gap:12px; align-items:center}
  .card{
    background:var(--panel);
    border-radius:18px;
    padding:16px;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
  }
  .controls{display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px}
  .group{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
  .label{font-weight:600; color:var(--muted);}
  .seg{display:flex; background:#0d142b; padding:6px; border-radius:14px; gap:6px}
  .seg button{
    border:0; padding:12px 14px; border-radius:10px; font-weight:700;
    background:transparent; color:var(--ink); cursor:pointer;
  }
  .seg button[aria-pressed="true"]{background:var(--accent); color:#071128}
  .big{font-size:2.4rem; text-align:center;}
  .sequence{
    display:flex; justify-content:center; gap:22px; flex-wrap:wrap;
    padding:18px; border-radius:16px; background:#0d142b; margin-top:10px;
  }
  .term{min-width:120px; text-align:center; font-weight:800}
  .term.missing{color:var(--muted)}
  .eq{opacity:.4}
  input.answer{
    width:320px; max-width:100%; font-size:2rem; padding:14px 16px;
    border-radius:14px; border:2px solid #1e2b55; background:#0b122a; color:#e8ecff;
  }
  .btn{
    border:0; padding:14px 18px; border-radius:14px; font-weight:800; cursor:pointer;
    font-size:1.2rem; background:var(--accent); color:#071128;
  }
  .btn.secondary{background:#182249; color:#e8ecff}
  .btn.ghost{background:transparent; border:2px solid #273366; color:#e8ecff}
  .feedback{font-size:1.35rem; margin-top:12px; min-height:1.6em}
  .ok{color:var(--good)} .no{color:var(--bad)}
  .score{font-weight:800;}
  .stack{display:flex; flex-direction:column; gap:14px}
  .mt{margin-top:16px}
  .mt2{margin-top:24px}
  .sheet{background:var(--panel); border-radius:18px; padding:18px;}
  table{width:100%; border-collapse:collapse; font-size:1.25rem}
  th, td{border-bottom:1px solid #1c2650; padding:10px 8px;}
  .small{font-size:.95rem; color:var(--muted)}
  .hide{display:none}
</style>
</head>
<body>
<div class="wrap">
<h1>Find the Missing Number in the Sequence</h1>

<div class="card controls">
<div class="group">
<div class="label">Sequence Type</div>
<div class="seg">
<!-- ✅ EXACTLY WHAT YOU REQUESTED -->
<button class="mode" data-mode="arith" aria-pressed="true">Common Difference (Add / Subtract)</button>
<button class="mode" data-mode="geo">Common Ratio (Multiply / Divide)</button>
<button class="mode" data-mode="mixed">Mixed</button>
</div>
</div>

<div class="group">
<div class="label">Difficulty</div>
<div class="seg">
<button class="diff" data-diff="easy" aria-pressed="true">Easy</button>
<button class="diff" data-diff="medium">Medium</button>
<button class="diff" data-diff="hard">Hard</button>
</div>
</div>

<div class="group">
<div class="label">Worksheet</div>
<div class="seg">
<button class="sheet-size" data-n="5">5</button>
<button class="sheet-size" data-n="10">10</button>
<button class="sheet-size" data-n="15">15</button>
</div>
<button id="makeSheet" class="btn ghost">Create Worksheet</button>
</div>
</div>

<div id="game" class="card mt2">
<div class="score">Score: <span id="score">0</span>/<span id="attempts">0</span></div>

<div class="stack mt">
<div class="big">Enter the missing value.</div>
<div id="sequence" class="sequence big"></div>

<div class="row">
<input id="answer" class="answer" placeholder="Type your answer…" />
<button id="submitBtn" class="btn">Submit</button>
<button id="nextBtn" class="btn secondary">Next</button>
</div>

<div id="feedback" class="feedback"></div>
</div>
</div>

<div id="worksheetView" class="sheet mt2 hide">
<h2>Worksheet — Missing Number</h2>
<div id="sheetMeta" class="small"></div>
<div id="sheetTableWrap" class="mt"></div>
</div>

</div>

<script>
(()=>{
const rnd=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;
const choice=a=>a[rnd(0,a.length-1)];

function format(n){
let s=Math.round(n*10000)/10000+"";
let [i,f=""]=s.split(".");
i=i.replace(/\B(?=(\d{3})+(?!\d))/g," ");
return i+(f?"."+f.replace(/0+$/,""):"");
}

function parse(v){
return Number(v.replace(",","."));}

function makeA(diff){
let d=choice([1,2,3,4,5,6,7,8,9,10])*choice([1,-1]);
let start=rnd(5,50);
let miss=choice([1,2,3]);
let seq=[];
for(let i=0;i<5;i++) seq.push(start+i*d);
return {seq,miss,ans:seq[miss]};
}

function makeG(){
let r=choice([2,3,4,0.5]);
let a1=choice([2,4,6,8,12,16]);
let miss=choice([1,2,3]);
let seq=[];
for(let i=0;i<5;i++) seq.push(a1*Math.pow(r,i));
return {seq,miss,ans:seq[miss]};
}

let current=null,score=0,attempts=0;

const seqDiv=document.getElementById("sequence");
const feedback=document.getElementById("feedback");
const ans=document.getElementById("answer");

function newQ(){
let mode=document.querySelector(".mode[aria-pressed='true']").dataset.mode;
current=mode==="geo"?makeG():makeA();
render();
feedback.textContent="";
ans.value="";
}

function render(){
seqDiv.innerHTML="";
current.seq.forEach((v,i)=>{
if(i>0){let c=document.createElement("div");c.className="eq";c.textContent=",";seqDiv.appendChild(c);}
let d=document.createElement("div");
d.className="term"+(i===current.miss?" missing":"");
d.textContent=i===current.miss?"?":format(v);
seqDiv.appendChild(d);
});
}

function check(){
let v=parse(ans.value);
attempts++;
let correct=Math.abs(v-current.ans)<1e-6;
let terms=seqDiv.querySelectorAll(".term");
terms[current.miss].textContent=format(current.ans);
if(correct){score++;feedback.innerHTML="<span class='ok'>Correct!</span>";}
else{feedback.innerHTML="<span class='no'>Correct answer: "+format(current.ans)+"</span>";}
document.getElementById("score").textContent=score;
document.getElementById("attempts").textContent=attempts;
}

document.querySelectorAll(".mode").forEach(b=>{
b.onclick=()=>{
document.querySelectorAll(".mode").forEach(x=>x.setAttribute("aria-pressed","false"));
b.setAttribute("aria-pressed","true");
newQ();
};
});

document.getElementById("submitBtn").onclick=check;
document.getElementById("nextBtn").onclick=newQ;

newQ();
})();
</script>
</body>
</html>
